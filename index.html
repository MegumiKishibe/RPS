<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>じゃんけんゲーム with チートモード</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&display=swap" rel="stylesheet">
<style>
    /* 基本設定 */
    * {
    box-sizing: border-box;
    }

    body {
    margin: 0;
    padding: 0;
    font-family: 'Outfit', sans-serif;
    background: linear-gradient(135deg, #1e1e2f, #12121a);
    color: #fff;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    }

    h1 {
    font-size: 3rem;
    margin-bottom: 1rem;
    color: #fff;
    text-shadow: 2px 2px 8px rgba(255, 255, 255, 0.2);
    }

    .subtitle {
    font-size: 1.2rem;
    margin-bottom: 2rem;
    color: #aaa;
    }

    .button-group {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
    }

    button {
    padding: 0.8rem 1.5rem;
    font-size: 1.2rem;
    border: none;
    border-radius: 8px;
    background: #2c2c3d;
    color: #fff;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    transition: all 0.3s ease;
    }

    button:hover {
    background: #5c00ff;
    color: #fff;
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 0 10px #5c00ff, 0 0 20px #5c00ff33;
    }

    #cheatMode {
    transform: scale(1.5);
    margin-right: 10px;
    }

    label {
    display: flex;
    align-items: center;
    font-weight: bold;
    font-size: 1.1rem;
    margin-bottom: 1.5rem;
    color: #eee;
    }

    #result {
    font-size: 1.6rem;
    font-weight: bold;
    min-height: 2em;
    transition: color 0.3s ease;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
    }

    /* 勝敗の結果をネオンカラーで表示するためのクラスたち */
    /* JavaScriptで .win / .lose / .draw を result 要素に追加することで色が変わる */
    .win { color: #57aaff; }
    .lose { color: #ff5555; }
    .draw { color: #00ff99; }

    /* 背景に敷かれたアニメーション用レイヤー */
    /* 通常時はグラデ背景、チートモード時にアニメが発動 */
    .overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    pointer-events: none;
    background: linear-gradient(135deg, #1e1e2f, #12121a);
    transition: background 1s ease;
    }

    /* チートモードがONになったときに適用されるアニメーション */
    /* bodyに .cheat-active がつくと .overlay にこのアニメが発動 */
    .cheat-active .overlay {
    animation: cheatGlow 1s infinite alternate;
    }
    /* 背景が変化する演出（紫色） */
    @keyframes cheatGlow {
    0%   { background: #2e003e; }
    100% { background: #5e00a0; }
    }
</style>
</head>
<body>
<!-- チートモードON時に背景を変化させるための専用要素。CSSで制御されます -->
<div class="overlay"></div>

<h1>じゃんけんゲーム</h1>
<p class="subtitle">普通のじゃんけん... と思いきや？</p>

<div class="button-group">
    <button>✊ グー</button>
    <button>✌️ チョキ</button>
    <button>🖐 パー</button>
</div>

<!-- チートモードのON/OFFを切り替えるチェックボックス -->
<!-- JavaScriptでこのチェック状態を取得するには getElementById('cheatMode') を使います -->
<label>
    <input type="checkbox" id="cheatMode"> チートモードをONにする
</label>

<!-- 勝敗の結果を表示するエリア -->
<!-- JavaScriptでここにテキストを表示するには getElementById('result') を使います -->
<p id="result"></p>

<script>
const btnGroup = document.querySelector('.button-group');
const result = document.getElementById('result');
const cheat = document.getElementById('cheatMode');

let cheatOn = false;//初期設定はチートOFF

cheat.addEventListener('change', (e) => {
	cheatOn = e.target.checked;
	if (e.target.checked) {
		document.body.classList.add('cheat-active');
		console.log('チートモードON')
	} else {
		document.body.classList.remove('cheat-active');
		console.log('チートモードOFF')
	}
});

btnGroup.addEventListener('click', (e) => {
	const btn = e.target.closest('button');
	if (!btn) return;
	//alert('成功');

// グー=0, チョキ=1, パー=2
let plHand;
if (btn.textContent.includes("グー")) {
	plHand = 0;

} else if (btn.textContent.includes("チョキ") ){
	plHand = 1;
} else {
	plHand = 2;
}

// じゃんけんCPU
//const cpuHand = Math.floor(Math.random() * 3);
let cpuHand;
//チートON/OFFの条件分岐
if (cheatOn) {
	cpuHand = (plHand + 1) % 3;
} else {
	cpuHand = Math.floor(Math.random() * 3);
}
//勝敗に応じて色を替える
let textcolor;

// if (result.textContent.includes("あいこ")) {
// 		textcolor = "draw";
// 	} else if (result.textContent.includes("勝ち")) {
// 		textcolor = "win";
// 	} else if (result.textContent.includes("勝ち")) {
// 		textcolor = "lose";
// 	} else {
// 		cls = null;
// 	}

// result.classList.remove("draw","win","lose");
// result.classList.add(textcolor);//textcolor変数を代入に変更
//result.classList.add("draw");
//result.classList.add("win");
//result.classList.add("lose");

//結果表示変数outcome設定
let outcome;//あいこ０、勝ち１、負け２
// グー=0, チョキ=1, パー=2
// 勝敗判定
if (plHand === 0) {
	if (cpuHand === 0) {
		result.textContent ="あなた：グー　相手：グー　→あいこ！";
		outcome = 0;
		//console.log("debug:",result.textContent);
	} else if (cpuHand === 1){
    result.textContent = "あなた：グー　相手：チョキ　→あなたの勝ち！";
	outcome = 1;
	//console.log("debug:",result.textContent);
	} else {
    result.textContent = "あなた；グー　相手：パー　→あなたの負け！";
	outcome = 2;
	//console.log("debug:",result.textContent);

	}
//if (plHand === cpuHand) {
	//result.textContent = "あいこ！";
	//console.log("プレイヤー:", plHand, "CPU:", cpuHand);
	//} else if (plHand === 0) { // プレイヤーがグー
	//if (cpuHand === 1) { // CPUがチョキ
	//result.textContent = "あなた：グー　相手：チョキ　→あなたの勝ち！";
	//}else { // CPUがパー
    //result.textContent = "あなた；グー　相手：パー　→あなたの負け！";
	//}
	//console.log("プレイヤー:", plHand, "CPU:", cpuHand);

} else if (plHand === 1) { // プレイヤーがチョキ
	if (cpuHand === 1) {
		result.textContent = "あなた：グー　相手：グー　あいこ！";
		outcome = 0;
		//console.log("debug:",result.textContent);

	} else if (cpuHand === 2){
		result.textContent = "あなた：チョキ　相手：パー　→あなたの勝ち！";
		outcome = 1;
		//console.log("debug:",result.textContent);

	} else {
		result.textContent = "あなた：チョキ　相手：グー　→あなたの負け！";
		outcome = 2;
		//console.log("debug:",result.textContent);

	}
	// if (plHand === 1) { // プレイヤーがパー
	// 	result.textContent = "あなた：チョキ　相手：パー　→あなたの勝ち！";
	// }else { // CPUがグー
	// 	result.textContent = "あなた：チョキ　相手：グー　→あなたの負け！";
	// }
	// //console.log("プレイヤー:", plHand, "CPU:", cpuHand);

} else { // プレイヤーがパー
	if (cpuHand === 2) {
		result.textContent = "あなた：パー　相手：パー　あいこ！";
		outcome = 0;
		//console.log("debug:",result.textContent);
	} else if (cpuHand === 0){
		result.textContent = "あなた：パー　相手：グー　→あなたの勝ち！";
		outcome = 1;
		//console.log("debug:",result.textContent);
	} else {
		result.textContent = "あなた：パー　相手：チョキ　→あなたの負け！";
		outcome = 2;
		//console.log("debug:",result.textContent);
	}
}
if (outcome === 0) {
	textcolor = "draw";
} else if (outcome === 1) {
	textcolor = "win";
} else {
	textcolor = "lose";
}

result.classList.remove("draw","win","lose");
result.classList.add(textcolor);//textcolor変数を代入に変更

});
	// } else { // プレイヤーがパー
	//   if (cpuHand === 0) { // CPUがグー
	//     result.textContent = "→あなたの勝ち！";
	//   } else { // CPUがチョキ
	//     result.textContent = "→あなたの負け！";
	//   }
	//   console.log("プレイヤー:", plHand, "CPU:", cpuHand);
	// }

	//result.innerHTML = btn.textContent
	//result.innerHTML = result.textContent
</script>
</body>
</html>