<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>じゃんけんゲーム with チートモード</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&display=swap" rel="stylesheet">
<style>
    /* 基本設定 */
    * {
    box-sizing: border-box;
    }

    body {
    margin: 0;
    padding: 0;
    font-family: 'Outfit', sans-serif;
    background: linear-gradient(135deg, #1e1e2f, #12121a);
    color: #fff;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    }

    h1 {
    font-size: 3rem;
    margin-bottom: 1rem;
    color: #fff;
    text-shadow: 2px 2px 8px rgba(255, 255, 255, 0.2);
    }

    .subtitle {
    font-size: 1.2rem;
    margin-bottom: 2rem;
    color: #aaa;
    }

    .button-group {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
    }

    button {
    padding: 0.8rem 1.5rem;
    font-size: 1.2rem;
    border: none;
    border-radius: 8px;
    background: #2c2c3d;
    color: #fff;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    transition: all 0.3s ease;
    }

    button:hover {
    background: #5c00ff;
    color: #fff;
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 0 10px #5c00ff, 0 0 20px #5c00ff33;
    }

    #cheatMode {
    transform: scale(1.5);
    margin-right: 10px;
    }

    label {
    display: flex;
    align-items: center;
    font-weight: bold;
    font-size: 1.1rem;
    margin-bottom: 1.5rem;
    color: #eee;
    }

    #result {
    font-size: 1.6rem;
    font-weight: bold;
    min-height: 2em;
    transition: color 0.3s ease;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
    }

    /* 勝敗の結果をネオンカラーで表示するためのクラスたち */
    /* JavaScriptで .win / .lose / .draw を result 要素に追加することで色が変わる */
    .win { color: #57aaff; }
    .lose { color: #ff5555; }
    .draw { color: #00ff99; }

    /* 背景に敷かれたアニメーション用レイヤー */
    /* 通常時はグラデ背景、チートモード時にアニメが発動 */
    .overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    pointer-events: none;
    background: linear-gradient(135deg, #1e1e2f, #12121a);
    transition: background 1s ease;
    }

    /* チートモードがONになったときに適用されるアニメーション */
    /* bodyに .cheat-active がつくと .overlay にこのアニメが発動 */
    .cheat-active .overlay {
    animation: cheatGlow 1s infinite alternate;
    }
    /* 背景が変化する演出（紫色） */
    @keyframes cheatGlow {
    0%   { background: #2e003e; }
    100% { background: #5e00a0; }
    }
</style>
</head>
<body>
<!-- チートモードON時に背景を変化させるための専用要素。CSSで制御されます -->
<div class="overlay"></div>

<h1>じゃんけんゲーム</h1>
<p class="subtitle">普通のじゃんけん... と思いきや？</p>

<div class="button-group">
    <button>✊ グー</button>
    <button>✌️ チョキ</button>
    <button>🖐 パー</button>
</div>

<!-- チートモードのON/OFFを切り替えるチェックボックス -->
<!-- JavaScriptでこのチェック状態を取得するには getElementById('cheatMode') を使います -->
<label>
    <input type="checkbox" id="cheatMode"> チートモードをONにする
</label>

<!-- 勝敗の結果を表示するエリア -->
<!-- JavaScriptでここにテキストを表示するには getElementById('result') を使います -->
<p id="result"></p>
<script>
const btnGroup = document.querySelector('.button-group');
const result = document.getElementById('result');
const cheat = document.getElementById('cheatMode');

let cheatOn = false; // 初期設定はチートOFF

function getPlHandFromBtn(btn) {
	const text = btn.textContent;
	if (text.includes('グー')) return 0;
	if (text.includes('チョキ')) return 1;//前の行でreturn→次の始まりはifでいい。
	return 2; //パー
}

//------cpuの手とチートONでCpuが必ず負ける関数
function getCpuHand(plHand, cheatOn) {
	//チートOFFでランダム出力
	if (!cheatOn) {
		return Math.floor(Math.random() * 3);
	}
	//チートONでCpuが必ず負ける
	return (plHand + 1) % 3;
}

//------勝敗あいこ０、勝ち１、負け２を判定する関数
function judgeOutcome(plHand, cpuHand) {
	if (plHand === cpuHand) return 0;//あいこ
	if (plHand === 0 && cpuHand === 1) return 1;//pグー、cチョキ
	if (plHand === 1 && cpuHand === 2) return 1;//pチョキ、cパー
	if (plHand === 2 && cpuHand === 0) return 1;//pパー、cグー
	else return 2;//それ以外は負け
}
//--------------Event--------------

cheat.addEventListener('change', (e) => {
cheatOn = e.target.checked;
document.body.classList.toggle('cheat-active');

});

btnGroup.addEventListener('click', (e) => {
const btn = e.target.closest('button');
if (!btn) return;

const plHand = getPlHandFromBtn(btn);
const cpuHand = getCpuHand(plHand, cheatOn);
const outcome = judgeOutcome(plHand, cpuHand);

//----結果表示用text代入----
const textHands = ['グー','チョキ','パー'];
const textOutcome = ['→あいこ！','→あなたの勝ち！','→あなたの負け！'];

//---結果画面表示
result.textContent = 'あなた：' + textHands[plHand] + '相手：' + textHands[cpuHand] + '' + textOutcome[outcome]

// 結果に応じて色を変える
let textcolor;
if (outcome === 0) {
textcolor = "draw";
} else if (outcome === 1) {
textcolor = "win";
} else {
textcolor = "lose";
}

result.classList.remove("draw", "win", "lose");
result.classList.add(textcolor);

});
</script>

</body>
</html>